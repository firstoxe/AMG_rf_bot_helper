from aiogram import types

from keyboards.inline.boosters_kb import create_cb_boosters
from loader import dp, db
from aiogram.utils.emoji import emojize
from utils.misc import rate_limit
from asyncpg import Connection, Record


@rate_limit(2, 'boosters')
@dp.message_handler(commands='boosters')
async def bot_boosters_check(message: types.Message):
    try:
        pool: Connection = db
        find_user: Record = await pool.fetchrow('''SELECT * FROM test.public."user" WHERE id = $1''', message.from_user.id,)
        if find_user:
            anws = ''
            list_anws =["""–ï—Å—Ç—å 3 —Ç–∏–ø–∞ –º–∞—É (–º—è–≤–∫–∞)

üÄÑ–ì–æ–ª–∏–∞—Ñ üõ°–ó–∞—â–∏—Ç–∞: 0.25%
üÄÑÔ∏è–ë–∞–ª–∏—Å—Ç–∞ ‚öîÔ∏è–£—Ä–æ–Ω: 0.25%
üÄÑÔ∏è–ì–∞—Å—Ç—Ä–∞—Ñ–µ—Ç üí®–£–≤–æ—Ä–æ—Ç: 0.25%""", '4 –º–æ–¥—É–ª—è (üÄÑÔ∏è–û—Ä—É–∂–µ–π–Ω—ã–π –º–æ–¥—É–ª—å, üÄÑÔ∏è–ú–æ–¥—É–ª—å –±—Ä–æ–Ω–∏, üÄÑÔ∏è–ú–æ–¥—É–ª—å —É—Å–∫–æ—Ä–∏—Ç–µ–ª—è, üÄÑÔ∏è–ú–æ–¥—É–ª—å –ø–∏—Ç–∞–Ω–∏—è)','‚ò£Ô∏è–Ø–¥–µ—Ä–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è',"""–ï—Å—Ç—å 4 –∞–Ω–∏–º—É—Å–∞

üé¥–ü–µ–π–º–æ–Ω üõ°–ó–∞—â–∏—Ç–∞: 0.25%
üé¥–ò–∑–∏–¥–∞ ‚öîÔ∏è–£—Ä–æ–Ω: 0.25% 
üé¥–ì–µ–∫–∞—Ç–∞ üí®–£–≤–æ—Ä–æ—Ç: 0.25%
üé¥–ò–Ω–∞–Ω–Ω–∞ ‚ù§Ô∏è–ó–¥–æ—Ä–æ–≤—å–µ: 0.25%""",'4 —á–∞—Å—Ç–∏ (üé¥–ú–∞–≥–∏—è, üé¥–ö—Ä—ã–ª—å—è, üé¥–ê—É—Ä–∞, üé¥–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –∫–∞–º–µ–Ω—å)','üè∫–ü–æ—Ç—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —ç–Ω–µ—Ä–≥–∏—è',"""–ï—Å—Ç—å 3 –ü–£ (–ø—É—Å–∫–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)

üÉè–†–∞–∫–µ—Ç–Ω–∏—Ü–∞ üõ°–ó–∞—â–∏—Ç–∞: 0.25%
üÉè–û–≥–Ω–µ–º–µ—Ç ‚öîÔ∏è–£—Ä–æ–Ω: 0.25% (–æ—á —Å—Ç—Ä–∞–Ω–Ω–æ, –¥–æ–ª–∂–Ω–∞ –∂–µ –±—ã—Ç—å –∏–∑–∏–¥–∏–∞ü§®)
üÉè–ü—É–ª–µ–º–µ—Ç üí®–£–≤–æ—Ä–æ—Ç: 0.25%""",'4 —á–∞—Å—Ç–∏ (üÉè–î—É–ª–æ, üÉè–û—Å–∞–¥–Ω—ã–π –∫–æ—Ä–ø—É—Å, üÉè–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞, üÉè–ë–æ–µ–ø—Ä–∏–ø–∞—Å—ã)',' ‚öóÔ∏è–¢–µ–º–Ω–∞—è –º–∞—Ç–µ—Ä–∏—è']
            if find_user["race"] == 1:
                anws = f"""–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è, –∫–∞–∫–∏–µ —É—Å–∏–ª–µ–Ω–∏—è —Ç–µ–±–µ –Ω—É–∂–Ω—ã!

{list_anws[0]}

–ß—Ç–æ –±—ã –∏—Ö —Å–æ–±—Ä–∞—Ç—å —Ç—Ä–µ–±—É–µ—Ç—Å—è üèµ1 400 000 –∞–¥–µ–Ω—ã –∏ {list_anws[1]}

–ù–∞–¥–µ–≤, —É —Ç–µ–±—è –ø–æ—è–≤–∏—Ç—Å—è 4 –¥–æ–ø —Å–ª–æ—Ç–∞ –¥–ª—è —É—Å–∏–ª–µ–Ω–∏–π

–ò –¥–∞, —á—Ç–æ –±—ã –Ω–∞–¥–µ—Ç—å –∏–ª–∏ –ø–æ—á–∏–Ω–∏—Ç—å —á–∞—Å—Ç–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è {list_anws[2]}

–ù–∏–∂–µ –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π —Å–ª–æ—Ç –∏ –≥–¥–µ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
"""
            elif find_user["race"] == 2:
                anws = f"""–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è, –∫–∞–∫–∏–µ —É—Å–∏–ª–µ–Ω–∏—è —Ç–µ–±–µ –Ω—É–∂–Ω—ã!

{list_anws[3]}

–ß—Ç–æ –±—ã –µ—ë —Å–æ–±—Ä–∞—Ç—å —Ç—Ä–µ–±—É–µ—Ç—Å—è üèµ1 400 000 –∞–¥–µ–Ω—ã –∏ {list_anws[4]}

–ù–∞–¥–µ–≤, —É —Ç–µ–±—è –ø–æ—è–≤–∏—Ç—Å—è 4 –¥–æ–ø —Å–ª–æ—Ç–∞ –¥–ª—è —É—Å–∏–ª–µ–Ω–∏–π

–ò –¥–∞, —á—Ç–æ –±—ã –Ω–∞–¥–µ—Ç—å –∏–ª–∏ –ø–æ—á–∏–Ω–∏—Ç—å —á–∞—Å—Ç–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è {list_anws[5]}

–ù–∏–∂–µ –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π —Å–ª–æ—Ç –∏ –≥–¥–µ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
"""

            elif find_user["race"] == 3:
                anws = f"""–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è, –∫–∞–∫–∏–µ —É—Å–∏–ª–µ–Ω–∏—è —Ç–µ–±–µ –Ω—É–∂–Ω—ã!

{list_anws[6]}

–ß—Ç–æ –±—ã –µ—ë —Å–æ–±—Ä–∞—Ç—å —Ç—Ä–µ–±—É–µ—Ç—Å—è üèµ1 400 000 –∞–¥–µ–Ω—ã –∏ {list_anws[7]}

–ù–∞–¥–µ–≤, —É —Ç–µ–±—è –ø–æ—è–≤–∏—Ç—Å—è 4 –¥–æ–ø —Å–ª–æ—Ç–∞ –¥–ª—è —É—Å–∏–ª–µ–Ω–∏–π

–ò –¥–∞, —á—Ç–æ –±—ã –Ω–∞–¥–µ—Ç—å –∏–ª–∏ –ø–æ—á–∏–Ω–∏—Ç—å —á–∞—Å—Ç–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è {list_anws[8]}

–ù–∏–∂–µ –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π —Å–ª–æ—Ç –∏ –≥–¥–µ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
"""
            await message.answer(text=anws, reply_markup=await create_cb_boosters(message.from_user.id, message.date, find_user["race"]))
        else:
            await message.answer('–∏–∑–≤–∏–Ω–∏, –Ω–æ —è —Ç–µ–±—è –Ω–µ –∑–Ω–∞—é, —Å–∫–∏–Ω—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ –∏–≥—Ä—ã, —á—Ç–æ–±—ã —è —Å–º–æ–≥ –ø–æ–Ω—è—Ç—å –∫ –∫–∞–∫–æ–π —Ç—ã —Ä–∞—Å–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—à—å')
    except Exception as ee:
        await message.answer(emojize(ee))





